'use strict';function a41_0x2b1a(_0x3e49ad,_0x487061){const _0x3587c6=a41_0x3587();return a41_0x2b1a=function(_0x2b1a08,_0x8ea021){_0x2b1a08=_0x2b1a08-0xe0;let _0x493075=_0x3587c6[_0x2b1a08];return _0x493075;},a41_0x2b1a(_0x3e49ad,_0x487061);}const a41_0x201858=a41_0x2b1a;(function(_0x4db3dd,_0x10f1d2){const _0x124e3a=a41_0x2b1a,_0x199c77=_0x4db3dd();while(!![]){try{const _0x29c436=-parseInt(_0x124e3a(0x10d))/0x1*(parseInt(_0x124e3a(0xe9))/0x2)+parseInt(_0x124e3a(0xf8))/0x3*(-parseInt(_0x124e3a(0xfc))/0x4)+parseInt(_0x124e3a(0x104))/0x5+parseInt(_0x124e3a(0xe3))/0x6*(parseInt(_0x124e3a(0x107))/0x7)+-parseInt(_0x124e3a(0xff))/0x8*(-parseInt(_0x124e3a(0xed))/0x9)+-parseInt(_0x124e3a(0x10b))/0xa*(parseInt(_0x124e3a(0xf9))/0xb)+-parseInt(_0x124e3a(0xfd))/0xc;if(_0x29c436===_0x10f1d2)break;else _0x199c77['push'](_0x199c77['shift']());}catch(_0x4c6837){_0x199c77['push'](_0x199c77['shift']());}}}(a41_0x3587,0x5720a));var __decorate=this&&this['__decorate']||function(_0x419a3c,_0xf3a61e,_0x47c05f,_0x1287cb){const _0x1817b0=a41_0x2b1a;var _0x58ff13=arguments[_0x1817b0(0x106)],_0x2a9fdd=_0x58ff13<0x3?_0xf3a61e:_0x1287cb===null?_0x1287cb=Object[_0x1817b0(0xe7)](_0xf3a61e,_0x47c05f):_0x1287cb,_0x3c42c2;if(typeof Reflect===_0x1817b0(0xe4)&&typeof Reflect[_0x1817b0(0xee)]==='function')_0x2a9fdd=Reflect[_0x1817b0(0xee)](_0x419a3c,_0xf3a61e,_0x47c05f,_0x1287cb);else{for(var _0x531cff=_0x419a3c[_0x1817b0(0x106)]-0x1;_0x531cff>=0x0;_0x531cff--)if(_0x3c42c2=_0x419a3c[_0x531cff])_0x2a9fdd=(_0x58ff13<0x3?_0x3c42c2(_0x2a9fdd):_0x58ff13>0x3?_0x3c42c2(_0xf3a61e,_0x47c05f,_0x2a9fdd):_0x3c42c2(_0xf3a61e,_0x47c05f))||_0x2a9fdd;}return _0x58ff13>0x3&&_0x2a9fdd&&Object['defineProperty'](_0xf3a61e,_0x47c05f,_0x2a9fdd),_0x2a9fdd;},__metadata=this&&this[a41_0x201858(0xf6)]||function(_0x28a1f1,_0x2b181f){const _0x5f50e5=a41_0x201858;if(typeof Reflect==='object'&&typeof Reflect[_0x5f50e5(0xe5)]==='function')return Reflect[_0x5f50e5(0xe5)](_0x28a1f1,_0x2b181f);};Object[a41_0x201858(0xfe)](exports,a41_0x201858(0x109),{'value':!![]}),exports[a41_0x201858(0x108)]=void 0x0;const common_1=require('@nestjs/common'),not_allowed_error_1=require(a41_0x201858(0xeb)),either_1=require(a41_0x201858(0x101)),products_repository_1=require(a41_0x201858(0xe0)),viewers_repository_1=require(a41_0x201858(0xe8)),views_repository_1=require(a41_0x201858(0x103)),resource_not_found_error_1=require(a41_0x201858(0xfb)),view_1=require(a41_0x201858(0x100));let RegisterViewUseCase=class RegisterViewUseCase{constructor(_0x2c5190,_0x29f21f,_0x56c90b){const _0x179cb2=a41_0x201858;this[_0x179cb2(0xef)]=_0x2c5190,this['viewersRepository']=_0x29f21f,this[_0x179cb2(0x10c)]=_0x56c90b;}async[a41_0x201858(0xfa)](_0x59d59a){const _0x1b9e65=a41_0x201858,[_0x5ba4ac,_0x2ba8ff]=await Promise['all']([this[_0x1b9e65(0xef)]['findById'](_0x59d59a['productId']),this[_0x1b9e65(0xf1)][_0x1b9e65(0xf7)](_0x59d59a[_0x1b9e65(0xf0)])]);if(!_0x5ba4ac)return(0x0,either_1[_0x1b9e65(0xe1)])(new resource_not_found_error_1[(_0x1b9e65(0xf3))]('Product','ID',_0x59d59a[_0x1b9e65(0x102)]));if(!_0x2ba8ff)return(0x0,either_1['left'])(new resource_not_found_error_1[(_0x1b9e65(0xf3))](_0x1b9e65(0xec),'ID',_0x59d59a[_0x1b9e65(0xf0)]));if(_0x5ba4ac[_0x1b9e65(0x110)][_0x1b9e65(0x10f)](_0x2ba8ff))return(0x0,either_1[_0x1b9e65(0xe1)])(new not_allowed_error_1[(_0x1b9e65(0x10a))](_0x1b9e65(0xe2)));const _0x402690=view_1[_0x1b9e65(0xf2)]['create']({'product':_0x5ba4ac,'viewer':_0x2ba8ff}),_0x1f1bdb=await this[_0x1b9e65(0x10c)][_0x1b9e65(0xf5)](_0x402690);if(_0x1f1bdb)return(0x0,either_1[_0x1b9e65(0xe6)])({'view':_0x402690});else await this[_0x1b9e65(0x10c)][_0x1b9e65(0xea)](_0x402690);return(0x0,either_1[_0x1b9e65(0xe6)])({'view':_0x402690});}};function a41_0x3587(){const _0x2095f7=['../../enterprise/entities/view','../../../../core/logic/either','productId','../repositories/views.repository','2994870oygzEl','design:paramtypes','length','1032409ONoqlU','RegisterViewUseCase','__esModule','NotAllowedError','1010oNmdct','viewsRepository','161zELVBd','Injectable','equals','owner','../repositories/products.repository','left','Views\x20cannot\x20be\x20registered\x20by\x20the\x20product\x20owner','6sVZUmz','object','metadata','right','getOwnPropertyDescriptor','../repositories/viewers.repository','1426LvqujE','create','../../../../core/errors/common/not-allowed.error','Viewer','9OhNmZF','decorate','productsRepository','viewerId','viewersRepository','View','ResourceNotFoundError','ProductsRepository','isViewed','__metadata','findById','37119vJFEtR','28193rqzHPM','execute','./errors/resource-not-found.error','24RsAUXX','3643020FcUgfo','defineProperty','2895136DkRsjl'];a41_0x3587=function(){return _0x2095f7;};return a41_0x3587();}exports[a41_0x201858(0x108)]=RegisterViewUseCase,exports[a41_0x201858(0x108)]=RegisterViewUseCase=__decorate([(0x0,common_1[a41_0x201858(0x10e)])(),__metadata(a41_0x201858(0x105),[products_repository_1[a41_0x201858(0xf4)],viewers_repository_1['ViewersRepository'],views_repository_1['ViewsRepository']])],RegisterViewUseCase);