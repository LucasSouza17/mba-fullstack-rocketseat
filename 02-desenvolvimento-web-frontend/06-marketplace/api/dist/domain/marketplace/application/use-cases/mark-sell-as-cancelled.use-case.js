'use strict';const a38_0xe490b8=a38_0x1bf7;function a38_0x1bf7(_0x713a10,_0x235b56){const _0x59bbc9=a38_0x59bb();return a38_0x1bf7=function(_0x1bf7ce,_0x1be69c){_0x1bf7ce=_0x1bf7ce-0xa8;let _0x10f923=_0x59bbc9[_0x1bf7ce];return _0x10f923;},a38_0x1bf7(_0x713a10,_0x235b56);}function a38_0x59bb(){const _0x3f5a48=['../repositories/sellers.repository','../../../../core/logic/either','left','../../enterprise/entities/product','3392382iSjYAB','Injectable','__metadata','83154lnLveh','right','Product','276azeTWx','./errors/resource-not-found.error','../../../../core/errors/common/not-allowed.error','179160QEWiIE','16675IRexpv','__esModule','@nestjs/common','NotAllowedError','productId','getOwnPropertyDescriptor','save','execute','../repositories/products.repository','ownerId','Seller','4LwPFfd','design:paramtypes','2152480fVCxkm','sellersRepository','2043417iUbduj','status','equals','CANCELLED','83880oPvSdh','productsRepository','MarkSellAsCancelledUseCase','ProductsRepository','__decorate','findById','defineProperty','decorate','ResourceNotFoundError','owner','metadata','Status'];a38_0x59bb=function(){return _0x3f5a48;};return a38_0x59bb();}(function(_0x117dfe,_0xa22760){const _0x557caf=a38_0x1bf7,_0x32d67f=_0x117dfe();while(!![]){try{const _0x57d0a3=parseInt(_0x557caf(0xcf))/0x1*(-parseInt(_0x557caf(0xbd))/0x2)+parseInt(_0x557caf(0xd3))/0x3+parseInt(_0x557caf(0xd1))/0x4+parseInt(_0x557caf(0xc4))/0x5*(-parseInt(_0x557caf(0xc0))/0x6)+-parseInt(_0x557caf(0xba))/0x7+-parseInt(_0x557caf(0xc3))/0x8+parseInt(_0x557caf(0xaa))/0x9;if(_0x57d0a3===_0xa22760)break;else _0x32d67f['push'](_0x32d67f['shift']());}catch(_0x317434){_0x32d67f['push'](_0x32d67f['shift']());}}}(a38_0x59bb,0x621b0));var __decorate=this&&this[a38_0xe490b8(0xae)]||function(_0x48f9b9,_0xba1ca7,_0x36a9a6,_0xece260){const _0x35dcde=a38_0xe490b8;var _0x54746c=arguments['length'],_0x388973=_0x54746c<0x3?_0xba1ca7:_0xece260===null?_0xece260=Object[_0x35dcde(0xc9)](_0xba1ca7,_0x36a9a6):_0xece260,_0x4ea242;if(typeof Reflect==='object'&&typeof Reflect[_0x35dcde(0xb1)]==='function')_0x388973=Reflect['decorate'](_0x48f9b9,_0xba1ca7,_0x36a9a6,_0xece260);else{for(var _0x1d6de4=_0x48f9b9['length']-0x1;_0x1d6de4>=0x0;_0x1d6de4--)if(_0x4ea242=_0x48f9b9[_0x1d6de4])_0x388973=(_0x54746c<0x3?_0x4ea242(_0x388973):_0x54746c>0x3?_0x4ea242(_0xba1ca7,_0x36a9a6,_0x388973):_0x4ea242(_0xba1ca7,_0x36a9a6))||_0x388973;}return _0x54746c>0x3&&_0x388973&&Object[_0x35dcde(0xb0)](_0xba1ca7,_0x36a9a6,_0x388973),_0x388973;},__metadata=this&&this[a38_0xe490b8(0xbc)]||function(_0x5b27fe,_0x3da1ec){const _0x2dbda8=a38_0xe490b8;if(typeof Reflect==='object'&&typeof Reflect[_0x2dbda8(0xb4)]==='function')return Reflect[_0x2dbda8(0xb4)](_0x5b27fe,_0x3da1ec);};Object[a38_0xe490b8(0xb0)](exports,a38_0xe490b8(0xc5),{'value':!![]}),exports[a38_0xe490b8(0xac)]=void 0x0;const common_1=require(a38_0xe490b8(0xc6)),not_allowed_error_1=require(a38_0xe490b8(0xc2)),either_1=require(a38_0xe490b8(0xb7)),products_repository_1=require(a38_0xe490b8(0xcc)),sellers_repository_1=require(a38_0xe490b8(0xb6)),resource_not_found_error_1=require(a38_0xe490b8(0xc1)),product_1=require(a38_0xe490b8(0xb9));let MarkSellAsCancelledUseCase=class MarkSellAsCancelledUseCase{constructor(_0xdb35a0,_0x56909b){this['sellersRepository']=_0xdb35a0,this['productsRepository']=_0x56909b;}async[a38_0xe490b8(0xcb)](_0x515501){const _0x4159f2=a38_0xe490b8,[_0x44071f,_0x1ca217]=await Promise['all']([this[_0x4159f2(0xd2)][_0x4159f2(0xaf)](_0x515501[_0x4159f2(0xcd)]),this[_0x4159f2(0xab)]['findById'](_0x515501['productId'])]);if(!_0x44071f)return(0x0,either_1['left'])(new resource_not_found_error_1['ResourceNotFoundError'](_0x4159f2(0xce),'ID',_0x515501['ownerId']));if(!_0x1ca217)return(0x0,either_1['left'])(new resource_not_found_error_1[(_0x4159f2(0xb2))](_0x4159f2(0xbf),'ID',_0x515501[_0x4159f2(0xc8)]));if(!_0x1ca217[_0x4159f2(0xb3)]['id'][_0x4159f2(0xa8)](_0x44071f['id']))return(0x0,either_1[_0x4159f2(0xb8)])(new not_allowed_error_1[(_0x4159f2(0xc7))]('You\x20are\x20not\x20the\x20owner\x20of\x20this\x20product.'));if(_0x1ca217[_0x4159f2(0xd4)]===product_1[_0x4159f2(0xbf)][_0x4159f2(0xb5)][_0x4159f2(0xa9)])return(0x0,either_1[_0x4159f2(0xb8)])(new not_allowed_error_1[(_0x4159f2(0xc7))]('This\x20product\x20is\x20already\x20cancelled.'));if(_0x1ca217[_0x4159f2(0xd4)]===product_1[_0x4159f2(0xbf)][_0x4159f2(0xb5)]['SOLD'])return(0x0,either_1['left'])(new not_allowed_error_1[(_0x4159f2(0xc7))]('You\x20cannot\x20cancel\x20a\x20sold\x20product.'));return _0x1ca217[_0x4159f2(0xd4)]=product_1[_0x4159f2(0xbf)][_0x4159f2(0xb5)][_0x4159f2(0xa9)],await this[_0x4159f2(0xab)][_0x4159f2(0xca)](_0x1ca217),(0x0,either_1[_0x4159f2(0xbe)])({'product':_0x1ca217});}};exports[a38_0xe490b8(0xac)]=MarkSellAsCancelledUseCase,exports['MarkSellAsCancelledUseCase']=MarkSellAsCancelledUseCase=__decorate([(0x0,common_1[a38_0xe490b8(0xbb)])(),__metadata(a38_0xe490b8(0xd0),[sellers_repository_1['SellersRepository'],products_repository_1[a38_0xe490b8(0xad)]])],MarkSellAsCancelledUseCase);