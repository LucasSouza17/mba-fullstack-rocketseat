'use strict';function a44_0x573a(_0x145b55,_0x179d33){const _0x13ec3d=a44_0x13ec();return a44_0x573a=function(_0x573af0,_0x131b3a){_0x573af0=_0x573af0-0xd2;let _0x181681=_0x13ec3d[_0x573af0];return _0x181681;},a44_0x573a(_0x145b55,_0x179d33);}const a44_0x367a3e=a44_0x573a;(function(_0xb20929,_0xe9333a){const _0x256b70=a44_0x573a,_0x22800c=_0xb20929();while(!![]){try{const _0x3fc030=parseInt(_0x256b70(0xee))/0x1+parseInt(_0x256b70(0xde))/0x2*(-parseInt(_0x256b70(0x110))/0x3)+-parseInt(_0x256b70(0xf5))/0x4*(parseInt(_0x256b70(0xf4))/0x5)+parseInt(_0x256b70(0xe9))/0x6+-parseInt(_0x256b70(0x105))/0x7*(-parseInt(_0x256b70(0xe2))/0x8)+-parseInt(_0x256b70(0xd4))/0x9+parseInt(_0x256b70(0xe5))/0xa;if(_0x3fc030===_0xe9333a)break;else _0x22800c['push'](_0x22800c['shift']());}catch(_0x4223c6){_0x22800c['push'](_0x22800c['shift']());}}}(a44_0x13ec,0x77f03));var __decorate=this&&this[a44_0x367a3e(0x10e)]||function(_0x762fbe,_0x45c11e,_0x2feee0,_0x468d1b){const _0x11760b=a44_0x367a3e;var _0x2ffeb8=arguments[_0x11760b(0xeb)],_0x4a8ac2=_0x2ffeb8<0x3?_0x45c11e:_0x468d1b===null?_0x468d1b=Object[_0x11760b(0x10c)](_0x45c11e,_0x2feee0):_0x468d1b,_0x148253;if(typeof Reflect==='object'&&typeof Reflect[_0x11760b(0xe4)]==='function')_0x4a8ac2=Reflect['decorate'](_0x762fbe,_0x45c11e,_0x2feee0,_0x468d1b);else{for(var _0x49694d=_0x762fbe['length']-0x1;_0x49694d>=0x0;_0x49694d--)if(_0x148253=_0x762fbe[_0x49694d])_0x4a8ac2=(_0x2ffeb8<0x3?_0x148253(_0x4a8ac2):_0x2ffeb8>0x3?_0x148253(_0x45c11e,_0x2feee0,_0x4a8ac2):_0x148253(_0x45c11e,_0x2feee0))||_0x4a8ac2;}return _0x2ffeb8>0x3&&_0x4a8ac2&&Object[_0x11760b(0x109)](_0x45c11e,_0x2feee0,_0x4a8ac2),_0x4a8ac2;},__metadata=this&&this[a44_0x367a3e(0xd2)]||function(_0x482480,_0x55f5ca){const _0x3cb9ac=a44_0x367a3e;if(typeof Reflect===_0x3cb9ac(0x10d)&&typeof Reflect[_0x3cb9ac(0xed)]===_0x3cb9ac(0xf6))return Reflect['metadata'](_0x482480,_0x55f5ca);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a44_0x367a3e(0x102)]=void 0x0;const common_1=require(a44_0x367a3e(0x106)),either_1=require('../../../../core/logic/either'),hash_comparer_1=require(a44_0x367a3e(0x107)),hash_generator_1=require(a44_0x367a3e(0xff)),attachments_repository_1=require(a44_0x367a3e(0xfd)),sellers_repository_1=require(a44_0x367a3e(0xfa)),email_already_exists_error_1=require('./errors/email-already-exists.error'),invalid_password_error_1=require(a44_0x367a3e(0xf2)),phone_already_exists_error_1=require(a44_0x367a3e(0xe8)),resource_not_found_error_1=require('./errors/resource-not-found.error'),wrong_credentials_error_1=require(a44_0x367a3e(0xf0));function a44_0x13ec(){const _0x2fd684=['avatarId','phone','all','../repositories/sellers.repository','newPassword','Injectable','../repositories/attachments.repository','userId','../cryptography/hash-generator','name','compare','UpdateSellerUseCase','InvalidPasswordError','toLowerCase','6066613hzGklM','@nestjs/common','../cryptography/hash-comparer','WrongCredentialsError','defineProperty','save','EmailAlreadyExistsError','getOwnPropertyDescriptor','object','__decorate','hash','1335ofnRHx','__metadata','AttachmentsRepository','8496963wJvJXr','resolve','Seller','PhoneAlreadyExistsError','sellersRepository','ResourceNotFoundError','password','design:paramtypes','SellersRepository','hashComparer','3670GjOpEm','execute','HashComparer','findByEmail','8AprYDC','attachmentsRepository','decorate','9944260OptpMR','hashGenerator','email','./errors/phone-already-exists.error','5371464lTYAMb','findByPhone','length','right','metadata','139570PFzvSV','avatar','./errors/wrong-credentials-error','Attachment','./errors/invalid-password.error','left','3975jDTcsw','3240URFlCj','function'];a44_0x13ec=function(){return _0x2fd684;};return a44_0x13ec();}let UpdateSellerUseCase=class UpdateSellerUseCase{constructor(_0x4f1848,_0x4fdc8f,_0x5dc14d,_0x5685da){const _0x1ca0dd=a44_0x367a3e;this[_0x1ca0dd(0xd8)]=_0x4f1848,this['attachmentsRepository']=_0x4fdc8f,this['hashComparer']=_0x5dc14d,this[_0x1ca0dd(0xe6)]=_0x5685da;}async[a44_0x367a3e(0xdf)](_0x51ad2b){const _0x546706=a44_0x367a3e,_0x49cb71=_0x51ad2b['email'][_0x546706(0x104)](),[_0x24220e,_0x5f4a1e,_0x1d6751,_0x3c74b7]=await Promise[_0x546706(0xf9)]([this[_0x546706(0xd8)]['findById'](_0x51ad2b[_0x546706(0xfe)]),this[_0x546706(0xd8)][_0x546706(0xe1)](_0x49cb71),this[_0x546706(0xd8)][_0x546706(0xea)](_0x51ad2b[_0x546706(0xf8)]),_0x51ad2b['avatarId']?this[_0x546706(0xe3)]['findById'](_0x51ad2b[_0x546706(0xf7)]):Promise[_0x546706(0xd5)](undefined)]);if(!_0x24220e)return(0x0,either_1[_0x546706(0xf3)])(new resource_not_found_error_1[(_0x546706(0xd9))](_0x546706(0xd6),'ID',_0x51ad2b[_0x546706(0xfe)]));if(_0x51ad2b['avatarId']&&!_0x3c74b7)return(0x0,either_1[_0x546706(0xf3)])(new resource_not_found_error_1[(_0x546706(0xd9))](_0x546706(0xf1),'ID',_0x51ad2b[_0x546706(0xf7)]));if(_0x5f4a1e&&!_0x24220e['equals'](_0x5f4a1e))return(0x0,either_1[_0x546706(0xf3)])(new email_already_exists_error_1[(_0x546706(0x10b))](_0x49cb71));if(_0x1d6751&&!_0x24220e['equals'](_0x1d6751))return(0x0,either_1['left'])(new phone_already_exists_error_1[(_0x546706(0xd7))](_0x51ad2b[_0x546706(0xf8)]));_0x24220e[_0x546706(0xe7)]=_0x49cb71,_0x24220e['name']=_0x51ad2b[_0x546706(0x100)],_0x24220e[_0x546706(0xf8)]=_0x51ad2b[_0x546706(0xf8)];if(_0x3c74b7)_0x24220e[_0x546706(0xef)]=_0x3c74b7;if(_0x51ad2b[_0x546706(0xfb)]&&_0x51ad2b['password']){const _0x2469d9=await this[_0x546706(0xdd)]['compare'](_0x51ad2b[_0x546706(0xda)],_0x24220e[_0x546706(0xda)]);if(!_0x2469d9)return(0x0,either_1[_0x546706(0xf3)])(new wrong_credentials_error_1[(_0x546706(0x108))]());const _0x4d2739=await this[_0x546706(0xdd)][_0x546706(0x101)](_0x51ad2b['newPassword'],_0x24220e[_0x546706(0xda)]);if(_0x4d2739)return(0x0,either_1[_0x546706(0xf3)])(new invalid_password_error_1[(_0x546706(0x103))]('The\x20new\x20password\x20must\x20be\x20different\x20from\x20the\x20current\x20one.'));_0x24220e[_0x546706(0xda)]=await this[_0x546706(0xe6)][_0x546706(0x10f)](_0x51ad2b[_0x546706(0xfb)]);}return await this[_0x546706(0xd8)][_0x546706(0x10a)](_0x24220e),(0x0,either_1[_0x546706(0xec)])({'seller':_0x24220e});}};exports['UpdateSellerUseCase']=UpdateSellerUseCase,exports[a44_0x367a3e(0x102)]=UpdateSellerUseCase=__decorate([(0x0,common_1[a44_0x367a3e(0xfc)])(),__metadata(a44_0x367a3e(0xdb),[sellers_repository_1[a44_0x367a3e(0xdc)],attachments_repository_1[a44_0x367a3e(0xd3)],hash_comparer_1[a44_0x367a3e(0xe0)],hash_generator_1['HashGenerator']])],UpdateSellerUseCase);