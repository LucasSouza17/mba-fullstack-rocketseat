'use strict';const a40_0x341db8=a40_0x1561;function a40_0x5820(){const _0xfeb7fe=['length','Attachment','57627bBYKHS','hash','./errors/resource-not-found.error','616908ugtUHT','3NolxCZ','defineProperty','object','ResourceNotFoundError','SellersRepository','design:paramtypes','metadata','243222SKEfrs','3586930HnsvqN','getOwnPropertyDescriptor','4568obcwyA','Seller','../repositories/attachments.repository','phone','execute','avatarId','email','HashGenerator','./errors/email-already-exists.error','RegisterSellerUseCase','name','1771374Fydvws','sellersRepository','./errors/phone-already-exists.error','1405938GKREfM','create','attachmentsRepository','Injectable','hashGenerator','../../enterprise/entities/user/seller','decorate','findById','__metadata','left','toLowerCase','PhoneAlreadyExistsError','../../../../core/logic/either','2670596Rqfboa','findByPhone','function','password'];a40_0x5820=function(){return _0xfeb7fe;};return a40_0x5820();}function a40_0x1561(_0xb53ba3,_0x553743){const _0x582098=a40_0x5820();return a40_0x1561=function(_0x156190,_0x348b2d){_0x156190=_0x156190-0x1a4;let _0x144c93=_0x582098[_0x156190];return _0x144c93;},a40_0x1561(_0xb53ba3,_0x553743);}(function(_0x13247a,_0x2c375e){const _0xcffa20=a40_0x1561,_0x156890=_0x13247a();while(!![]){try{const _0x363b7c=-parseInt(_0xcffa20(0x1b4))/0x1+parseInt(_0xcffa20(0x1ca))/0x2+parseInt(_0xcffa20(0x1cb))/0x3*(-parseInt(_0xcffa20(0x1c1))/0x4)+-parseInt(_0xcffa20(0x1a4))/0x5+-parseInt(_0xcffa20(0x1b1))/0x6+-parseInt(_0xcffa20(0x1d2))/0x7+parseInt(_0xcffa20(0x1a6))/0x8*(parseInt(_0xcffa20(0x1c7))/0x9);if(_0x363b7c===_0x2c375e)break;else _0x156890['push'](_0x156890['shift']());}catch(_0x451764){_0x156890['push'](_0x156890['shift']());}}}(a40_0x5820,0xcdf63));var __decorate=this&&this['__decorate']||function(_0x48bd81,_0x818f70,_0x52d63f,_0x5385d3){const _0x47b19a=a40_0x1561;var _0x1b5566=arguments[_0x47b19a(0x1c5)],_0x119ad0=_0x1b5566<0x3?_0x818f70:_0x5385d3===null?_0x5385d3=Object[_0x47b19a(0x1a5)](_0x818f70,_0x52d63f):_0x5385d3,_0x3517e7;if(typeof Reflect===_0x47b19a(0x1cd)&&typeof Reflect[_0x47b19a(0x1ba)]===_0x47b19a(0x1c3))_0x119ad0=Reflect[_0x47b19a(0x1ba)](_0x48bd81,_0x818f70,_0x52d63f,_0x5385d3);else{for(var _0x4ebaf8=_0x48bd81['length']-0x1;_0x4ebaf8>=0x0;_0x4ebaf8--)if(_0x3517e7=_0x48bd81[_0x4ebaf8])_0x119ad0=(_0x1b5566<0x3?_0x3517e7(_0x119ad0):_0x1b5566>0x3?_0x3517e7(_0x818f70,_0x52d63f,_0x119ad0):_0x3517e7(_0x818f70,_0x52d63f))||_0x119ad0;}return _0x1b5566>0x3&&_0x119ad0&&Object[_0x47b19a(0x1cc)](_0x818f70,_0x52d63f,_0x119ad0),_0x119ad0;},__metadata=this&&this[a40_0x341db8(0x1bc)]||function(_0x2905a7,_0x226c9e){const _0x52692a=a40_0x341db8;if(typeof Reflect===_0x52692a(0x1cd)&&typeof Reflect[_0x52692a(0x1d1)]===_0x52692a(0x1c3))return Reflect['metadata'](_0x2905a7,_0x226c9e);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a40_0x341db8(0x1af)]=void 0x0;const common_1=require('@nestjs/common'),either_1=require(a40_0x341db8(0x1c0)),hash_generator_1=require('../cryptography/hash-generator'),attachments_repository_1=require(a40_0x341db8(0x1a8)),sellers_repository_1=require('../repositories/sellers.repository'),email_already_exists_error_1=require(a40_0x341db8(0x1ae)),phone_already_exists_error_1=require(a40_0x341db8(0x1b3)),resource_not_found_error_1=require(a40_0x341db8(0x1c9)),seller_1=require(a40_0x341db8(0x1b9));let RegisterSellerUseCase=class RegisterSellerUseCase{constructor(_0x14db7a,_0x4a8853,_0x363d6f){const _0x989e8d=a40_0x341db8;this['sellersRepository']=_0x14db7a,this['attachmentsRepository']=_0x4a8853,this[_0x989e8d(0x1b8)]=_0x363d6f;}async[a40_0x341db8(0x1aa)](_0x2bbc24){const _0x571e0b=a40_0x341db8,_0x185cf4=_0x2bbc24[_0x571e0b(0x1ac)][_0x571e0b(0x1be)](),[_0x3f6b29,_0x530cf0]=await Promise['all']([this[_0x571e0b(0x1b2)]['findByEmail'](_0x185cf4),this[_0x571e0b(0x1b2)][_0x571e0b(0x1c2)](_0x2bbc24[_0x571e0b(0x1a9)])]);if(_0x3f6b29)return(0x0,either_1[_0x571e0b(0x1bd)])(new email_already_exists_error_1['EmailAlreadyExistsError'](_0x185cf4));if(_0x530cf0)return(0x0,either_1[_0x571e0b(0x1bd)])(new phone_already_exists_error_1[(_0x571e0b(0x1bf))](_0x2bbc24['phone']));const _0x170a90=await this[_0x571e0b(0x1b8)][_0x571e0b(0x1c8)](_0x2bbc24[_0x571e0b(0x1c4)]),_0x1d6518=seller_1[_0x571e0b(0x1a7)]['create']({'email':_0x185cf4,'name':_0x2bbc24[_0x571e0b(0x1b0)],'phone':_0x2bbc24[_0x571e0b(0x1a9)],'password':_0x170a90});if(_0x2bbc24[_0x571e0b(0x1ab)]){const _0x3a914f=await this[_0x571e0b(0x1b6)][_0x571e0b(0x1bb)](_0x2bbc24[_0x571e0b(0x1ab)]);if(!_0x3a914f)return(0x0,either_1[_0x571e0b(0x1bd)])(new resource_not_found_error_1[(_0x571e0b(0x1ce))](_0x571e0b(0x1c6),'ID',_0x2bbc24[_0x571e0b(0x1ab)]));_0x1d6518['avatar']=_0x3a914f;}return await this['sellersRepository'][_0x571e0b(0x1b5)](_0x1d6518),(0x0,either_1['right'])({'seller':_0x1d6518});}};exports[a40_0x341db8(0x1af)]=RegisterSellerUseCase,exports[a40_0x341db8(0x1af)]=RegisterSellerUseCase=__decorate([(0x0,common_1[a40_0x341db8(0x1b7)])(),__metadata(a40_0x341db8(0x1d0),[sellers_repository_1[a40_0x341db8(0x1cf)],attachments_repository_1['AttachmentsRepository'],hash_generator_1[a40_0x341db8(0x1ad)]])],RegisterSellerUseCase);