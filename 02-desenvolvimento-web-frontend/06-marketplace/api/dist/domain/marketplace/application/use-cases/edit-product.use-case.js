'use strict';function a27_0x55ae(_0x5198cf,_0x504fa8){const _0x4dc143=a27_0x4dc1();return a27_0x55ae=function(_0x55ae3b,_0x35dd52){_0x55ae3b=_0x55ae3b-0x16b;let _0x59fc2d=_0x4dc143[_0x55ae3b];return _0x59fc2d;},a27_0x55ae(_0x5198cf,_0x504fa8);}const a27_0x2c1db8=a27_0x55ae;(function(_0x5aac9b,_0x3fc9e8){const _0x55260c=a27_0x55ae,_0x67bd00=_0x5aac9b();while(!![]){try{const _0x3f4a14=parseInt(_0x55260c(0x176))/0x1+-parseInt(_0x55260c(0x183))/0x2*(-parseInt(_0x55260c(0x196))/0x3)+-parseInt(_0x55260c(0x18c))/0x4+-parseInt(_0x55260c(0x1a7))/0x5+parseInt(_0x55260c(0x187))/0x6*(parseInt(_0x55260c(0x188))/0x7)+parseInt(_0x55260c(0x17c))/0x8+-parseInt(_0x55260c(0x173))/0x9*(parseInt(_0x55260c(0x19c))/0xa);if(_0x3f4a14===_0x3fc9e8)break;else _0x67bd00['push'](_0x67bd00['shift']());}catch(_0x1d1ffa){_0x67bd00['push'](_0x67bd00['shift']());}}}(a27_0x4dc1,0x446a7));var __decorate=this&&this[a27_0x2c1db8(0x193)]||function(_0x36f599,_0x561b28,_0x5ada86,_0x153a0b){const _0x411a7b=a27_0x2c1db8;var _0x16190b=arguments[_0x411a7b(0x1a0)],_0x1867aa=_0x16190b<0x3?_0x561b28:_0x153a0b===null?_0x153a0b=Object[_0x411a7b(0x199)](_0x561b28,_0x5ada86):_0x153a0b,_0x5d29f9;if(typeof Reflect===_0x411a7b(0x195)&&typeof Reflect['decorate']===_0x411a7b(0x174))_0x1867aa=Reflect[_0x411a7b(0x181)](_0x36f599,_0x561b28,_0x5ada86,_0x153a0b);else{for(var _0x1975fc=_0x36f599['length']-0x1;_0x1975fc>=0x0;_0x1975fc--)if(_0x5d29f9=_0x36f599[_0x1975fc])_0x1867aa=(_0x16190b<0x3?_0x5d29f9(_0x1867aa):_0x16190b>0x3?_0x5d29f9(_0x561b28,_0x5ada86,_0x1867aa):_0x5d29f9(_0x561b28,_0x5ada86))||_0x1867aa;}return _0x16190b>0x3&&_0x1867aa&&Object[_0x411a7b(0x17a)](_0x561b28,_0x5ada86,_0x1867aa),_0x1867aa;},__metadata=this&&this[a27_0x2c1db8(0x18e)]||function(_0x5ee97a,_0x3fd893){const _0x5599a8=a27_0x2c1db8;if(typeof Reflect===_0x5599a8(0x195)&&typeof Reflect[_0x5599a8(0x186)]==='function')return Reflect[_0x5599a8(0x186)](_0x5ee97a,_0x3fd893);};Object[a27_0x2c1db8(0x17a)](exports,a27_0x2c1db8(0x191),{'value':!![]}),exports[a27_0x2c1db8(0x171)]=void 0x0;const common_1=require(a27_0x2c1db8(0x1a2)),not_allowed_error_1=require('../../../../core/errors/common/not-allowed.error'),either_1=require(a27_0x2c1db8(0x16b)),attachments_repository_1=require(a27_0x2c1db8(0x179)),categories_repository_1=require(a27_0x2c1db8(0x16f)),products_repository_1=require('../repositories/products.repository'),sellers_repository_1=require('../repositories/sellers.repository'),resource_not_found_error_1=require(a27_0x2c1db8(0x19d)),product_1=require(a27_0x2c1db8(0x19e));function a27_0x4dc1(){const _0x316714=['475333pBvKWi','AttachmentsRepository','description','../repositories/attachments.repository','defineProperty','ownerId','587968uCkkmh','equals','data','NotAllowedError','Injectable','decorate','Product','2hoPCrO','inexistentIds','owner','metadata','474SpIHWA','25564JHucZA','title','Category','design:paramtypes','2022552pzCSRm','attachmentsRepository','__metadata','productsRepository','CategoriesRepository','__esModule','SOLD','__decorate','execute','object','1393788jlAgmY','categoriesRepository','Seller','getOwnPropertyDescriptor','sellersRepository','You\x20are\x20not\x20the\x20owner\x20of\x20this\x20product.','22830wQKORS','./errors/resource-not-found.error','../../enterprise/entities/product','category','length','SellersRepository','@nestjs/common','categoryId','priceInCents','ResourceNotFoundError','IDs','126095rkLtcP','attachmentsIds','../../../../core/logic/either','Status','save','join','../repositories/categories.repository','right','EditProductUseCase','left','1935QZlEzs','function','You\x20cannot\x20edit\x20a\x20sold\x20product.'];a27_0x4dc1=function(){return _0x316714;};return a27_0x4dc1();}let EditProductUseCase=class EditProductUseCase{constructor(_0x17880b,_0x3dd784,_0x2a2cad,_0x4bbf4c){const _0x545eed=a27_0x2c1db8;this[_0x545eed(0x19a)]=_0x17880b,this['productsRepository']=_0x3dd784,this[_0x545eed(0x197)]=_0x2a2cad,this[_0x545eed(0x18d)]=_0x4bbf4c;}async[a27_0x2c1db8(0x194)](_0x51e9bf){const _0x4151a1=a27_0x2c1db8,[_0x2c826c,_0x8ade5c,_0x444f59,_0x429688]=await Promise['all']([this[_0x4151a1(0x19a)]['findById'](_0x51e9bf[_0x4151a1(0x17b)]),this[_0x4151a1(0x18f)]['findById'](_0x51e9bf['id']),this[_0x4151a1(0x197)]['findById'](_0x51e9bf[_0x4151a1(0x1a3)]),this[_0x4151a1(0x18d)]['findManyByIds'](_0x51e9bf[_0x4151a1(0x1a8)])]);if(!_0x2c826c)return(0x0,either_1[_0x4151a1(0x172)])(new resource_not_found_error_1[(_0x4151a1(0x1a5))](_0x4151a1(0x198),'ID',_0x51e9bf[_0x4151a1(0x17b)]));if(!_0x8ade5c)return(0x0,either_1[_0x4151a1(0x172)])(new resource_not_found_error_1[(_0x4151a1(0x1a5))]('Product','ID',_0x51e9bf['id']));if(!_0x444f59)return(0x0,either_1[_0x4151a1(0x172)])(new resource_not_found_error_1[(_0x4151a1(0x1a5))](_0x4151a1(0x18a),'ID',_0x51e9bf[_0x4151a1(0x1a3)]));if(!_0x8ade5c[_0x4151a1(0x185)]['id'][_0x4151a1(0x17d)](_0x2c826c['id']))return(0x0,either_1[_0x4151a1(0x172)])(new not_allowed_error_1[(_0x4151a1(0x17f))](_0x4151a1(0x19b)));if(_0x8ade5c['status']===product_1[_0x4151a1(0x182)][_0x4151a1(0x16c)][_0x4151a1(0x192)])return(0x0,either_1['left'])(new not_allowed_error_1[(_0x4151a1(0x17f))](_0x4151a1(0x175)));if(!_0x429688['hasAll'])return(0x0,either_1[_0x4151a1(0x172)])(new resource_not_found_error_1['ResourceNotFoundError']('Attachment',_0x4151a1(0x1a6),_0x429688[_0x4151a1(0x184)][_0x4151a1(0x16e)](',\x20')));return _0x8ade5c[_0x4151a1(0x189)]=_0x51e9bf[_0x4151a1(0x189)],_0x8ade5c[_0x4151a1(0x178)]=_0x51e9bf[_0x4151a1(0x178)],_0x8ade5c[_0x4151a1(0x1a4)]=_0x51e9bf[_0x4151a1(0x1a4)],_0x8ade5c[_0x4151a1(0x19f)]=_0x444f59,_0x8ade5c['attachments']['update'](_0x429688[_0x4151a1(0x17e)]),await this['productsRepository'][_0x4151a1(0x16d)](_0x8ade5c),(0x0,either_1[_0x4151a1(0x170)])({'product':_0x8ade5c});}};exports[a27_0x2c1db8(0x171)]=EditProductUseCase,exports[a27_0x2c1db8(0x171)]=EditProductUseCase=__decorate([(0x0,common_1[a27_0x2c1db8(0x180)])(),__metadata(a27_0x2c1db8(0x18b),[sellers_repository_1[a27_0x2c1db8(0x1a1)],products_repository_1['ProductsRepository'],categories_repository_1[a27_0x2c1db8(0x190)],attachments_repository_1[a27_0x2c1db8(0x177)]])],EditProductUseCase);